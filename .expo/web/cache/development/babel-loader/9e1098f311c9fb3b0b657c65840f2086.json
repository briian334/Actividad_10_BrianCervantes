{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = App;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nrequire(\"react-native-gesture-handler\");\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _config = require(\"./src/firebase/config\");\n\nvar _native = require(\"@react-navigation/native\");\n\nvar _stack = require(\"@react-navigation/stack\");\n\nvar _screens = require(\"./src/screens\");\n\nvar _base = require(\"base-64\");\n\nvar _jsxFileName = \"E:\\\\UTCH\\\\Cuatrimestre 4\\\\Dise\\xF1o de Apps\\\\reactNative\\\\actividad-10\\\\App.js\";\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nif (!global.btoa) {\n  global.btoa = _base.encode;\n}\n\nif (!global.atob) {\n  global.atob = _base.decode;\n}\n\nvar Stack = (0, _stack.createStackNavigator)();\n\nfunction App() {\n  var _useState = (0, _react.useState)(true),\n      _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useState3 = (0, _react.useState)(null),\n      _useState4 = (0, _slicedToArray2.default)(_useState3, 2),\n      user = _useState4[0],\n      setUser = _useState4[1];\n\n  (0, _react.useEffect)(function () {\n    var usersRef = _config.firebase.firestore().collection('users');\n\n    _config.firebase.auth().onAuthStateChanged(function (user) {\n      if (user) {\n        usersRef.doc(user.uid).get().then(function (document) {\n          var userData = document.data();\n          setLoading(false);\n          setUser(userData);\n        }).catch(function (error) {\n          setLoading(false);\n        });\n      } else {\n        setLoading(false);\n      }\n    });\n  }, []);\n\n  if (loading) {\n    return _react.default.createElement(_react.default.Fragment, null);\n  }\n\n  return _react.default.createElement(_native.NavigationContainer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 5\n    }\n  }, _react.default.createElement(Stack.Navigator, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }\n  }, user ? _react.default.createElement(Stack.Screen, {\n    name: \"Inicio\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 11\n    }\n  }, function (props) {\n    return _react.default.createElement(_screens.HomeScreen, (0, _extends2.default)({}, props, {\n      extraData: user,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 23\n      }\n    }));\n  }) : _react.default.createElement(_react.default.Fragment, null, _react.default.createElement(Stack.Screen, {\n    name: \"Login\",\n    component: _screens.LoginScreen,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }\n  }), _react.default.createElement(Stack.Screen, {\n    name: \"Registration\",\n    component: _screens.RegistrationScreen,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }\n  }))));\n}","map":{"version":3,"sources":["E:/UTCH/Cuatrimestre 4/DiseÃ±o de Apps/reactNative/actividad-10/App.js"],"names":["global","btoa","encode","atob","decode","Stack","App","loading","setLoading","user","setUser","usersRef","firebase","firestore","collection","auth","onAuthStateChanged","doc","uid","get","then","document","userData","data","catch","error","props","LoginScreen","RegistrationScreen"],"mappings":";;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;;;;;AACA,IAAI,CAACA,MAAM,CAACC,IAAZ,EAAkB;AAAGD,EAAAA,MAAM,CAACC,IAAP,GAAcC,YAAd;AAAsB;;AAC3C,IAAI,CAACF,MAAM,CAACG,IAAZ,EAAkB;AAAEH,EAAAA,MAAM,CAACG,IAAP,GAAcC,YAAd;AAAsB;;AAE1C,IAAMC,KAAK,GAAG,kCAAd;;AAEe,SAASC,GAAT,GAAe;AAE5B,kBAA8B,qBAAS,IAAT,CAA9B;AAAA;AAAA,MAAOC,OAAP;AAAA,MAAgBC,UAAhB;;AACA,mBAAwB,qBAAS,IAAT,CAAxB;AAAA;AAAA,MAAOC,IAAP;AAAA,MAAaC,OAAb;;AAEA,wBAAU,YAAM;AACd,QAAMC,QAAQ,GAAGC,iBAASC,SAAT,GAAqBC,UAArB,CAAgC,OAAhC,CAAjB;;AACAF,qBAASG,IAAT,GAAgBC,kBAAhB,CAAmC,UAAAP,IAAI,EAAI;AACzC,UAAIA,IAAJ,EAAU;AACRE,QAAAA,QAAQ,CACLM,GADH,CACOR,IAAI,CAACS,GADZ,EAEGC,GAFH,GAGGC,IAHH,CAGQ,UAACC,QAAD,EAAc;AAClB,cAAMC,QAAQ,GAAGD,QAAQ,CAACE,IAAT,EAAjB;AACAf,UAAAA,UAAU,CAAC,KAAD,CAAV;AACAE,UAAAA,OAAO,CAACY,QAAD,CAAP;AACD,SAPH,EAQGE,KARH,CAQS,UAACC,KAAD,EAAW;AAChBjB,UAAAA,UAAU,CAAC,KAAD,CAAV;AACD,SAVH;AAWD,OAZD,MAYO;AACLA,QAAAA,UAAU,CAAC,KAAD,CAAV;AACD;AACF,KAhBD;AAiBD,GAnBD,EAmBG,EAnBH;;AAqBA,MAAID,OAAJ,EAAa;AACX,WACE,2DADF;AAGD;;AAED,SACE,6BAAC,2BAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,6BAAC,KAAD,CAAO,SAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACIE,IAAI,GACJ,6BAAC,KAAD,CAAO,MAAP;AAAc,IAAA,IAAI,EAAC,QAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG,UAAAiB,KAAK;AAAA,WAAI,6BAAC,mBAAD,6BAAgBA,KAAhB;AAAuB,MAAA,SAAS,EAAEjB,IAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAJ;AAAA,GADR,CADI,GAKJ,4DACE,6BAAC,KAAD,CAAO,MAAP;AAAc,IAAA,IAAI,EAAC,OAAnB;AAA2B,IAAA,SAAS,EAAEkB,oBAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEE,6BAAC,KAAD,CAAO,MAAP;AAAc,IAAA,IAAI,EAAC,cAAnB;AAAkC,IAAA,SAAS,EAAEC,2BAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CANJ,CADF,CADF;AAgBD","sourcesContent":["import 'react-native-gesture-handler';\r\nimport React, { useEffect, useState } from 'react'\r\nimport { firebase } from './src/firebase/config'\r\nimport { NavigationContainer } from '@react-navigation/native'\r\nimport { createStackNavigator } from '@react-navigation/stack'\r\nimport { LoginScreen, HomeScreen, RegistrationScreen } from './src/screens'\r\nimport {decode, encode} from 'base-64'\r\nif (!global.btoa) {  global.btoa = encode }\r\nif (!global.atob) { global.atob = decode }\r\n\r\nconst Stack = createStackNavigator();\r\n\r\nexport default function App() {\r\n\r\n  const [loading, setLoading] = useState(true)\r\n  const [user, setUser] = useState(null)\r\n\r\n  useEffect(() => {\r\n    const usersRef = firebase.firestore().collection('users');\r\n    firebase.auth().onAuthStateChanged(user => {\r\n      if (user) {\r\n        usersRef\r\n          .doc(user.uid)\r\n          .get()\r\n          .then((document) => {\r\n            const userData = document.data()\r\n            setLoading(false)\r\n            setUser(userData)\r\n          })\r\n          .catch((error) => {\r\n            setLoading(false)\r\n          });\r\n      } else {\r\n        setLoading(false)\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  if (loading) {\r\n    return (\r\n      <></>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <NavigationContainer>\r\n      <Stack.Navigator>\r\n        { user ? (\r\n          <Stack.Screen name=\"Inicio\">\r\n            {props => <HomeScreen {...props} extraData={user} />}\r\n          </Stack.Screen>\r\n        ) : (\r\n          <>\r\n            <Stack.Screen name=\"Login\" component={LoginScreen} />\r\n            <Stack.Screen name=\"Registration\" component={RegistrationScreen} />\r\n          </>\r\n        )}\r\n      </Stack.Navigator>\r\n    </NavigationContainer>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"script"}